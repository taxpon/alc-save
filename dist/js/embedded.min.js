(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Env=function(){function n(){}return n.log=function(e){n.DEBUG&&console.log(e)},n.eventName="AlcSaveChromeEvent",n.DEBUG=!1,n}();module.exports=Env;
},{}],2:[function(require,module,exports){
var Env=require("./Env"),save_button_class="alc-save__save-button",loader_class="alc-save__loader",server_url="";document.addEventListener(Env.eventName,function(e){Env.log(e.detail),server_url=e.detail.alcSaveUrl});var SaveManager=function(){function e(e,t){void 0===t&&(t="POST"),this.url=e,this.method=t}return e.getInstance=function(t,n){return void 0===n&&(n="POST"),null==e.instance?e.instance=new e(t,n):(e.instance.url=t,e.instance.method=n),e.instance},e._activateLoader=function(e){e.hide(),e.next().show()},e._deactivateLoader=function(e){e.show(),e.next().hide()},e.prototype.saveWord=function(t,n,r){e._activateLoader(r),Env.log("Send request to :"+this.url),$.ajax({url:this.url,method:this.method,data:{word:t,meaning:n}}).done(function(t){if(0!=t.code){var n="Something wrong occurred in remote serer.";alert(n),console.error(n)}e._deactivateLoader(r)}).fail(function(t){var n="Something wrong occurred in remote serer.";alert(n),console.error(n),console.error(t),e._deactivateLoader(r)})},e}(),AlcSave=function(){function e(){}return e.isAlcSearch=function(){return-1!=location.href.indexOf("eow.alc.co.jp/search?q=")},e.createButtons=function(){var e=$("<button/>");e.addClass(save_button_class),e.text("Save");var t=$("<img/>");t.addClass(loader_class),$(".midashi").after(t).after(e)},e.registerEvent=function(){$(".midashi").parent().on("click","."+save_button_class,function(){var t=e._getMidashiText($(this)),n=e._getFirstMeaning($(this));SaveManager.getInstance(server_url).saveWord(t,n,$(this))})},e._getMidashiText=function(e){return e.prev().text()},e._getFirstMeaning=function(e){var t,n=e.next().next(),r=n.children("div ol")[0];if(null!=r){var a=$(r),i=a.children("li")[0];if(null!=i){var o=$(i);Env.log("There is div > ol > li statement"),t=o}else Env.log("There is div > ol statement"),t=a}else Env.log("There is no div > ol statement"),t=n;return t.text()},e}();$(document).ready(function(){AlcSave.isAlcSearch()&&(AlcSave.createButtons(),AlcSave.registerEvent())});
},{"./Env":1}]},{},[2]);
